---
import { ClientRouter } from 'astro:transitions'
import '@fontsource-variable/onest'
import '../styles/global.css'
import Footer from '@c/Footer.astro'
import Header from '@c/Header.astro'

interface Props {
  title: string
  description: string
}

const { title, description } = Astro.props
const { currentLocale } = Astro
---

<!doctype html>
<html lang={currentLocale}>
  <head>
    <meta charset='UTF-8' />
    <meta name='description' content={description} />
    <meta name='viewport' content='width=device-width' />
    <link rel='icon' type='image/x-icon' href='/portfolio.ico' />
    <meta name='generator' content={Astro.generator} />
    <title>{title}</title>
    <ClientRouter />
  </head>
  <body
    class='m-auto flex max-w-md flex-col place-items-center justify-center md:m-0 md:max-w-full'
  >
    <Header />
    <div
      class='absolute top-0 z-[-2] h-full w-full bg-inherit bg-[radial-gradient(ellipse_80%_80%_at_50%_-20%,rgba(120,119,198,0.3),rgba(255,255,255,0))]'
    >
    </div>
    <slot />
    <Footer />
    <style is:global>
      :root {
        color-scheme: light dark;
      }

      * {
        min-width: 0;
        font: inherit;
      }

      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      img,
      video,
      svg {
        display: block;
        height: auto;
        max-width: 100%;
      }

      body {
        margin: 0;
        min-height: 100dvh;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        text-wrap: balance;
      }

      p {
        text-wrap: pretty;
      }

      html {
        scroll-behavior: smooth;
        font-family: 'Onest Variable', sans-serif, system-ui;
        font-display: swap;
        font-size: 16px;
        font-weight: 500;
      }

      @media (prefers-reduced-motion: reduce) {
        html {
          scroll-behavior: auto;
        }
      }

      ::-webkit-scrollbar {
        width: 5px;
      }

      ::-webkit-scrollbar-thumb {
        border-radius: 7px;
        background-color: #09f;
      }

      ::-webkit-scrollbar-track {
        background-color: transparent;
      }

      body {
        min-height: 100vh;
        overflow-x: hidden;
        overflow: auto;
        background-color: #f5f5f5;
      }

      body.dark {
        background-color: #2e2e2e;
      }

      #header-nav {
        animation: blurLight linear both;
        animation-timeline: scroll();
        animation-range: 0 500px;
      }

      @keyframes blur {
        to {
          box-shadow:
            0px 5px 50px -5px rgba(0, 0, 0, 0.1),
            0px 0px 0 1px rgba(0, 0, 0, 0.3);
          background: rgba(0, 0, 0, 0.3);
          backdrop-filter: blur(10px);
        }
      }

      @keyframes blurLight {
        to {
          box-shadow:
            0px 5px 50px -5px rgba(250, 250, 250, 0.1),
            0px 0px 0 1px rgba(250, 250, 250, 0.3);
          background: rgba(250, 250, 250, 0.3);
          backdrop-filter: blur(10px);
        }
      }

      @keyframes reveal {
        from {
          opacity: 0;
          translate: 0 100px;
          scale: 0.3;
          rotate: 20deg;
        }

        to {
          opacity: 1;
          translate: 0 0;
          scale: 1;
        }
      }

      .animate-scroll {
        animation: reveal linear both;
        animation-timeline: view();
        animation-range: entry 10% cover 30%;
      }

      body.dark #header-nav {
        animation: blur linear both;
        animation-timeline: scroll();
        animation-range: 0 500px;
      }
    </style>
  </body>
</html>
